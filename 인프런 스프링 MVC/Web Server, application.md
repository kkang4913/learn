# `웹어플리케이션의 이해 `

- ### 웹 - HTTP 기반으로 통신한다.
- HTTP
  - HTML 문서와 같은 리소스들을 가져올 수 있도록 해주는 프로토콜(약속)
  - URL
    - URI가 상위 개념이지만 혼용해서 사용되고 있음
    - 스킴(scheme), 호스트명, 경로명으로 구성 <br><br/>
    <img width="500" alt="image" src="https://user-images.githubusercontent.com/100770651/229727756-7f2f3947-844b-466e-bc7f-f66940c20be7.png">

    - 스킴(scheme)
      - 리소스를 획득하기 위한 방법 / 웹 애플리케이션 대부분 HTTP 프로토콜을 사용
      - `https: 암호화된 http 통신을 나타내는 스킴`
      - `mailto: 이메일의 수취인을 나타내는 스킴`
      - `ftp: FTP 프로토콜을 통한 파일 획득을 나타내는 스킴`
      - `file: 파일 시스템 속의 파일이나 디렉토리를 참조하기 위한 스킴`
    - 호스트명
      - 리소스가 존재하는 호스트(컴퓨터)의 이름을 말한다.
      - 네트워크상에 등록되어 클라이언트의 요청을 받아 응답하는 컴퓨터를 호스트 컴퓨터라고 말한다.
    - 경로명
      - 호스트명에서 지정된 컴퓨터상의 리소스의 위치틑 나타낸다

- ### HTTP Request Line
  <img width="490" alt="image" src="https://user-images.githubusercontent.com/100770651/229729545-83cad63d-6f90-43be-a300-48404e086bfd.png">
        
1. HTTP 메소드
     - 요청의 종류 / GET(요청), POST(생성), PUT(변경), DELETE(삭제) 등이 존재
     - 위 이미지에서의 요청은 GET 이므로 지정한 정보를 보내달라는 의미
2. URI / Request target
     - 무엇을 원하는지, 전송되는 목표
3. HTTP 버전
     - 버전에 따라 이용할 수 있는 메서드의 종류와 요청 헤더의 종류가 달라지기에 어떤 버전에 따른 요청인지 저장
     - Request Line 아래 부분을 Header 메세지 헤더라고 하며 요청의 부가적인 정보를 나타낸다.
4. Host
     - 요청하려는 서버 호스트 이름과 포트번호
5. Accept
     - 웹 클라이언트가 받을 수 있는 데이터 종류.
     - Content-Type 라는 형식으로 표시, 콤마로 구분해서 지정
6. Accept-Language
    - 웹 클라이언트가 받을 수 있는 자연 언어의 종류.
    - 자연 언어는 삶이 사용하는 언어를 말한다.
    - ex(en-us, utf-8)
7. USer-Agent
    - 이용중인 웹 브라우저의 종류와 버전

- ### HTTP Response Line
   <img width="454" alt="image" src="https://user-images.githubusercontent.com/100770651/229832628-ec7ff96d-f886-4682-baaa-be8b8271498a.png">

1. 상태라인(Status Line)
    - HTTP 요청과 마찬가지로 HTTP 응답에 대해서도 첫 번째 줄이 가장 중요.
    - 상태라인 이라고 하며, 구성은 HTTP 버전, 상태코드, 응답 구문으로 나뉜다. <br><br/>
    <img width="500" alt="image" src="https://user-images.githubusercontent.com/100770651/229833927-2a6bdb97-88a2-4089-a021-190531f5a0e6.png">
    - HTTP/1.1 : 사용하는 프로토콜의 버전
    - 200 : 상태 코드로 요청이 성공했는지 실패했는지에 대한 값
        - 200 - OK
        - 201 - Created
        - 302 - Found(HTTP 1.0)
        - 304 - Not Modified
        - 401 - Unauthorized
        - 404 - Not Found
        - 500 - Internal Server Error
        - 503 - Service Unavailable
        - Status code 단위별 의미
          - 2XX : 성공, 클라이언특 요청한 동작을 수신하여 이해, 승낙했으며 성공적으로 처리
          - 3XX : 리다이렉션 완료, 클라이언트는 요청을 마치기 위해 추가 동작이 필요함
          - 4XX : 요청 오류, 클라이언트에 오류가 있음
          - 5XX : 서버 오류, 서버가 유효한 요청을 명백하게 수행하지 못함.
    - 메세지 헤더
      - 상태라인에 이어 나오는 메세지 헤더로 두 번째 줄부터 빈 줄까지,
      - HTTP 요청의 메세지 헤더와 같은 형식으로, 응답에 관한 부가적인 정보가 담겨있다.
    - 메세지 본문
      - 웹 브라우저는 메세지 본문에 있는 HTML을 해석해 화면에 표시,
      - HTML은 텍스트 형식이므로 우리가 읽을 수 있는 형식으로 메세지 본문에 저장되어 있다.
- TCP/IP
  - 인터넷의 기본 통신 언어 
  - 데이터가 의도된 목적지에 닿을 수 있도록 보장해주는 통신 규약이다.
  - 웹 클라이언트 
      - 웹을 사용하는 고객을 의미하며 고객은 디바이스 장치가 될 수 있다.
  - 웹 브라우저
      - 디바이스 장치에서 동작하는 웹 클라이언트 프로그램을 웹 브라우저라고 한다.
      - 웹 브라우저는 크롬, 사파리, IE, Edge 등의 웹에 접근하는 소프트웨어이다.
### `웹 브라우저 클라이언트 -> 인터넷을 통해 -> 서버에 접근 -> 서버는 HTML 를 작성 -> 웹 브라우저 클라이언트 제공`
- ### 모든 것이 HTTP / HTTP 메세지에 모든 것을 전송
    - HTML, TEXT (일반적)
    - IMAGE,음성, 영상, 파일 (일반적)
    - API 사용 시 주로 쓰이는 JSON, XML
    - 거의 모든 형태의 데이터 전송 가능
    - 서버간에 데이터를 주고 받을 때도 대부분 HTTP 사용

## `웹서버(Web Server)`
- HTTP 기반 동작
- 정적 리소스 제공, 기타 부가기능
  - 정적(파일) HTML, CSS, JS, 이미지, 영상

## `웹 애플리케이션 서버(WAS)`
- HTTP 기반 동작
- 웹 서버 기능 포함  + 정적 리소스
- 프로그램 코드를 실행하여 로직 수행이 가능
    - HTTP 요청이 오면 사용자에 따라 다른 응답을 보여줄 수 있다.
    - 동적 HTML, HTTP API(JSON)
    - 서블릿, JSP, 스프링 MVC
## `웹 서버 ? 웹 애플리케이션 서버? 차이`
- 웹 서버는 정적 리소스(파일), WAS는 애플리케이션 로직
- 자바는 서블릿 컨테이너 기능을 제공하면 WAS
- 즉, WAS는 애플리케이션 코드를 실행하는데 더욱 특화

## `웹 시스템 구성 - WAS,DB`
- 최소한으로 WAS, DB 만으로 시스템 구성이 가능
- WAS는 정적, 애플리케이션 로직 모두 제공 가능
- WAS가 많은 역할을 담당 -> 서버 과부하 우려
- 또한 애플리케이션 로직이 정적 리소스 때문에 수행이 불가능한 경우가 생김
- WAS 장애시 오류 화면도 노출 불가능

## `웹 시스템 구성 -WEB, WAS,DB`
- 정적 리소스는 웹 서버가 처리
- 웹 서버는 애플리케이션 로직같은 동적인 처리가 필요시 WAS에 요청
- WAS는 중요한 애플리케이션 로직을 전담할 수 있다.
- 효율적인 리소스 관리
    - 정적 리소스가 많이 사용되면 WEB 증설
    - 애플리케이션 리소스가 많이 사용되면 WAS 증설
- 정적 리소스만 제공하는 웹 서버는 잘 죽지 않음
- 애플리케이션 로직이 동작하는 WAS 서버는 잘 죽음
- WAS, DB 장애시 WEB 서버가 오류 화면 제공 가능 